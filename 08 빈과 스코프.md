# ë¹ˆ ìŠ¤ì½”í”„ë€?      
ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ í•¨ê»˜ ìƒì„±ë˜ì–´, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ëœë‹¤ê³  ì•Œê³ ìˆë‹¤.  
**ê·¸ëŸ°ë° ì´ ë¹ˆì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê¼­ í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ë¡œ ì¡´ì¬ì‹œì¼œì•¼ í• ê¹Œ?ğŸ¤”**             
                   
ê¸°ì¡´ì— ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” ë°©ì‹ì€ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì´ë‹¤.         
ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ëŠ” ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ” ìŠ¤ì½”í”„ë¡œ í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ì¡´ì¬í•œë‹¤.      
í•˜ì§€ë§Œ, `ìŠ¤ì½”í”„`ë¼ëŠ” ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ë²”ìœ„ì˜ í•œ ì¢…ë¥˜ì¼ ë¿ì´ë‹¤.   
ì¦‰, ìŠ¤í”„ë§ì—ì„œëŠ” ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ ì™¸ì— ë‹¤ë¥¸ ìŠ¤ì½”í”„ë“¤ë„ ì¡´ì¬í•œë‹¤.   
       
**ìŠ¤í”„ë§ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ì–‘í•œ ìŠ¤ì½”í”„ë¥¼ ì§€ì›í•œë‹¤.**     
* **Singletone:** ê¸°ë³¸ ìŠ¤ì½”í”„, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ê°€ì¥ ë„“ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.      
* **prototype:** ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³  ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ë§¤ìš° ì§§ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.     
* **request:** ì›¹ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.    
* **session:** ì›¹ ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.    
* **application:** ì›¹ì˜ ì„œë¸”ë¦¿ ì»¨í…ìŠ¤ì™€ ê°™ì€ ë²”ìœ„ë¡œ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.    
    
ì´ëŸ¬í•œ ë¹ˆ ìŠ¤ì½”í”„ëŠ” `@Scope`ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°       
ë¹ˆ ë“±ë¡ì‹œ ì„¤ì •í•˜ëŠ” ê²ƒì´ê¸°ì— `@Bean`ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼í•œë‹¤.          
   
**ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë“±ë¡**
```java
@Scope("prototype")
@Component
public class HelloBean {}
```
   
**ìˆ˜ë™ ë“±ë¡**
```java
@Scope("prototype")
@Bean
PrototypeBean HelloBean() {
    return new HelloBean();
}
```

# í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„    
ë¹ˆì„ ìš”ì²­í•  ë•Œë§ˆë‹¤, ë§¤ë²ˆ ê°™ì€ ë¹ˆê³¼ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ë§ºëŠ” ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì™€ ë‹¬ë¦¬,        
í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ëŠ” ë¹ˆì„ ìš”ì²­í•  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ìƒˆë¡­ê²Œ ìƒì„±ëœ ë¹ˆê³¼ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ë§ºëŠ”ë‹¤.    
           
ë” ìƒì„¸í•˜ê²Œ ì„¤ëª…í•˜ìë©´,               
í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì€ **ë¹ˆ ìƒì„± ê³¼ì • ë° ì‚¬ìš©**ê¹Œì§€ëŠ” ì‹±ê¸€í†¤ ë¹ˆê³¼ ë™ì¼í•˜ê¸°ì—             
**ë¹ˆ ìƒì„± -> ì˜ì¡´ ê´€ê³„ ì£¼ì… -> ì´ˆê¸°í™”** ë‹¨ê³„ ê¹Œì§€ëŠ” ë™ì¼í•˜ê²Œ ì ìš©ë˜ë‚˜               
ì´í›„ ë¶€í„°ëŠ” ìŠ¤í”„ë§ì—ì„œ ë¹ˆì„ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì „ëµì„ ê°€ì§€ê³  ìˆë‹¤.                
ê·¸ë¦¬ê³  ë¯¸ë¦¬ ìƒì„±ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¹ˆì„ ìš”ì²­í•  ë•Œ ìƒì„±í•œë‹¤ëŠ” íŠ¹ì§•ë„ ê°€ì§€ê³  ìˆë‹¤.         
         
ì¦‰, ì´ˆê¸°í™” ì´í›„ì—ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆì„ ê´€ë¦¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—       
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¹ˆì„ ê´€ë¦¬í•´ì•¼í•œë‹¤ëŠ” ì±…ì„ì„ ë„˜ê²¨ë°›ê²Œ ëœë‹¤.      
ê·¸ë¦¬ê³  ì´ë¡œì¸í•´ `PreDestroy` ê°™ì€ ì¢…ë£Œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ë„ ì•ŠëŠ”ë‹¤.           
      
**SingletonTest**   
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonTest {

    @Test
    void singletonBeanFind() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SingletonBean.class);

        SingletonBean singletonBean1 = ac.getBean(SingletonBean.class);
        SingletonBean singletonBean2 = ac.getBean(SingletonBean.class);

        System.out.println("singletonBean1 = " + singletonBean1);
        System.out.println("singletonBean2 = " + singletonBean2);

        assertThat(singletonBean1).isSameAs(singletonBean2);

        ac.close();
    }


    @Scope(scopeName = "singleton")
    static class SingletonBean {

        @PostConstruct
        public void init() {
            System.out.println("SingletonBean.init");
        }

        @PreDestroy
        public void destroy() {
            System.out.println("SingletonBean.destroy");
        }

    }
}
```
   
**PrototypeTest**
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class PrototypeTest {

    @Test
    void prototypeBeanFind() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);

        System.out.println("find prototypeBean1, bean is create at this request time");
        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);

        System.out.println("find prototypeBean2, bean is create at this request time");
        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);

        System.out.println("singletonBean1 = " + prototypeBean1);
        System.out.println("singletonBean2 = " + prototypeBean2);

        assertThat(prototypeBean1).isNotSameAs(prototypeBean2);

        ac.close();
    }


    @Scope(scopeName = "prototype")
    static class PrototypeBean {

        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init");
        }

        @PreDestroy
        public void destroy() {
            System.out.println("PrototypeBean.destroy");
        }

    }
}
```
      
ì‹±ê¸€í†¤ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œì ì— ì´ˆê¸°í™” ë©”ì„œë“œê°€ ì‹¤í–‰ ë˜ì§€ë§Œ,         
**í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆì„ ì¡°íšŒí•  ë•Œ ìƒì„±ë˜ê³ , ì´ˆê¸°í™” ë©”ì„œë“œë„ ì‹¤í–‰ëœë‹¤.**           
í”„ë¡œí† íƒ€ì… ë¹ˆì„ 2ë²ˆ ì¡°íšŒí–ˆìœ¼ë¯€ë¡œ ì™„ì „íˆ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë¹ˆì´ ìƒì„±ë˜ê³ , ì´ˆê¸°í™”ë„ 2ë²ˆ ì‹¤í–‰ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.    
         
ì‹±ê¸€í†¤ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ë¹ˆì˜ ì¢…ë£Œ ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ì§€ë§Œ,      
í”„ë¡œí† íƒ€ì… ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì… ê·¸ë¦¬ê³  ì´ˆê¸°í™” ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³ , ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤.       
ë”°ë¼ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ @PreDestory ê°™ì€ ì¢…ë£Œ ë©”ì„œë“œê°€ ì „í˜€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.    
         
**í”„ë¡œí† íƒ€ì… ë¹ˆì˜ íŠ¹ì§• ì •ë¦¬**      
* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ëœë‹¤.   
* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì… ê·¸ë¦¬ê³  ì´ˆê¸°í™”ê¹Œì§€ë§Œ ê´€ì—¬í•œë‹¤.    
* ì¢…ë£Œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.    
* ê·¸ë˜ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì€ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì¡°íšŒí•œ í´ë¼ì´ì–¸íŠ¸ê°€ ê´€ë¦¬í•´ì•¼ í•œë‹¤.      
* ì¢…ë£Œ ë©”ì„œë“œì— ëŒ€í•œ í˜¸ì¶œë„ í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ í•´ì•¼í•œë‹¤.    

# í”„ë¡œí† íƒ€ì…ê³¼ ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©ì‹œ ë¬¸ì œì    











