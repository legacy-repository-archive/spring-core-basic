# ë¹ˆ ìŠ¤ì½”í”„ë€?      
ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ í•¨ê»˜ ìƒì„±ë˜ì–´, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ëœë‹¤ê³  ì•Œê³ ìˆë‹¤.  
**ê·¸ëŸ°ë° ì´ ë¹ˆì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê¼­ í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ë¡œ ì¡´ì¬ì‹œì¼œì•¼ í• ê¹Œ?ğŸ¤”**             
                   
ê¸°ì¡´ì— ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” ë°©ì‹ì€ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì´ë‹¤.         
ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ëŠ” ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ” ìŠ¤ì½”í”„ë¡œ í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ì¡´ì¬í•œë‹¤.      
í•˜ì§€ë§Œ, `ìŠ¤ì½”í”„`ë¼ëŠ” ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ë²”ìœ„ì˜ í•œ ì¢…ë¥˜ì¼ ë¿ì´ë‹¤.   
ì¦‰, ìŠ¤í”„ë§ì—ì„œëŠ” ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ ì™¸ì— ë‹¤ë¥¸ ìŠ¤ì½”í”„ë“¤ë„ ì¡´ì¬í•œë‹¤.   
       
**ìŠ¤í”„ë§ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ì–‘í•œ ìŠ¤ì½”í”„ë¥¼ ì§€ì›í•œë‹¤.**     
* **Singletone:** ê¸°ë³¸ ìŠ¤ì½”í”„, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ê°€ì¥ ë„“ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.      
* **prototype:** ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³  ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ë§¤ìš° ì§§ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.     
* **request:** ì›¹ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.    
* **session:** ì›¹ ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.    
* **application:** ì›¹ì˜ ì„œë¸”ë¦¿ ì»¨í…ìŠ¤ì™€ ê°™ì€ ë²”ìœ„ë¡œ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.    
    
ì´ëŸ¬í•œ ë¹ˆ ìŠ¤ì½”í”„ëŠ” `@Scope`ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°       
ë¹ˆ ë“±ë¡ì‹œ ì„¤ì •í•˜ëŠ” ê²ƒì´ê¸°ì— `@Bean`ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼í•œë‹¤.          
   
**ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë“±ë¡**
```java
@Scope("prototype")
@Component
public class HelloBean {}
```
   
**ìˆ˜ë™ ë“±ë¡**
```java
@Scope("prototype")
@Bean
PrototypeBean HelloBean() {
    return new HelloBean();
}
```

# í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„    
ë¹ˆì„ ìš”ì²­í•  ë•Œë§ˆë‹¤, ë§¤ë²ˆ ê°™ì€ ë¹ˆê³¼ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ë§ºëŠ” ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì™€ ë‹¬ë¦¬,        
í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ëŠ” ë¹ˆì„ ìš”ì²­í•  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ìƒˆë¡­ê²Œ ìƒì„±ëœ ë¹ˆê³¼ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ë§ºëŠ”ë‹¤.    
           
ë” ìƒì„¸í•˜ê²Œ ì„¤ëª…í•˜ìë©´,               
í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì€ **ë¹ˆ ìƒì„± ê³¼ì • ë° ì‚¬ìš©**ê¹Œì§€ëŠ” ì‹±ê¸€í†¤ ë¹ˆê³¼ ë™ì¼í•˜ê¸°ì—             
**ë¹ˆ ìƒì„± -> ì˜ì¡´ ê´€ê³„ ì£¼ì… -> ì´ˆê¸°í™”** ë‹¨ê³„ ê¹Œì§€ëŠ” ë™ì¼í•˜ê²Œ ì ìš©ë˜ë‚˜               
ì´í›„ ë¶€í„°ëŠ” ìŠ¤í”„ë§ì—ì„œ ë¹ˆì„ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì „ëµì„ ê°€ì§€ê³  ìˆë‹¤.                
ê·¸ë¦¬ê³  ë¯¸ë¦¬ ìƒì„±ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¹ˆì„ ìš”ì²­í•  ë•Œ ìƒì„±í•œë‹¤ëŠ” íŠ¹ì§•ë„ ê°€ì§€ê³  ìˆë‹¤.         
         
ì¦‰, ì´ˆê¸°í™” ì´í›„ì—ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆì„ ê´€ë¦¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—       
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¹ˆì„ ê´€ë¦¬í•´ì•¼í•œë‹¤ëŠ” ì±…ì„ì„ ë„˜ê²¨ë°›ê²Œ ëœë‹¤.      
ê·¸ë¦¬ê³  ì´ë¡œì¸í•´ `PreDestroy` ê°™ì€ ì¢…ë£Œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ë„ ì•ŠëŠ”ë‹¤.           
      
**SingletonTest**   
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonTest {

    @Test
    void singletonBeanFind() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SingletonBean.class);

        SingletonBean singletonBean1 = ac.getBean(SingletonBean.class);
        SingletonBean singletonBean2 = ac.getBean(SingletonBean.class);

        System.out.println("singletonBean1 = " + singletonBean1);
        System.out.println("singletonBean2 = " + singletonBean2);

        assertThat(singletonBean1).isSameAs(singletonBean2);

        ac.close();
    }


    @Scope(scopeName = "singleton")
    static class SingletonBean {

        @PostConstruct
        public void init() {
            System.out.println("SingletonBean.init");
        }

        @PreDestroy
        public void destroy() {
            System.out.println("SingletonBean.destroy");
        }

    }
}
```
   
**PrototypeTest**
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class PrototypeTest {

    @Test
    void prototypeBeanFind() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);

        System.out.println("find prototypeBean1, bean is create at this request time");
        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);

        System.out.println("find prototypeBean2, bean is create at this request time");
        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);

        System.out.println("singletonBean1 = " + prototypeBean1);
        System.out.println("singletonBean2 = " + prototypeBean2);

        assertThat(prototypeBean1).isNotSameAs(prototypeBean2);

        ac.close();
    }


    @Scope(scopeName = "prototype")
    static class PrototypeBean {

        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init");
        }

        @PreDestroy
        public void destroy() {
            System.out.println("PrototypeBean.destroy");
        }

    }
}
```
      
ì‹±ê¸€í†¤ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œì ì— ì´ˆê¸°í™” ë©”ì„œë“œê°€ ì‹¤í–‰ ë˜ì§€ë§Œ,         
**í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆì„ ì¡°íšŒí•  ë•Œ ìƒì„±ë˜ê³ , ì´ˆê¸°í™” ë©”ì„œë“œë„ ì‹¤í–‰ëœë‹¤.**           
í”„ë¡œí† íƒ€ì… ë¹ˆì„ 2ë²ˆ ì¡°íšŒí–ˆìœ¼ë¯€ë¡œ ì™„ì „íˆ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë¹ˆì´ ìƒì„±ë˜ê³ , ì´ˆê¸°í™”ë„ 2ë²ˆ ì‹¤í–‰ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.    
         
ì‹±ê¸€í†¤ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ë¹ˆì˜ ì¢…ë£Œ ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ì§€ë§Œ,      
í”„ë¡œí† íƒ€ì… ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì… ê·¸ë¦¬ê³  ì´ˆê¸°í™” ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³ , ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤.       
ë”°ë¼ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ @PreDestory ê°™ì€ ì¢…ë£Œ ë©”ì„œë“œê°€ ì „í˜€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.    
         
**í”„ë¡œí† íƒ€ì… ë¹ˆì˜ íŠ¹ì§• ì •ë¦¬**      
* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ëœë‹¤.   
* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì… ê·¸ë¦¬ê³  ì´ˆê¸°í™”ê¹Œì§€ë§Œ ê´€ì—¬í•œë‹¤.    
* ì¢…ë£Œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.    
* ê·¸ë˜ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì€ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì¡°íšŒí•œ í´ë¼ì´ì–¸íŠ¸ê°€ ê´€ë¦¬í•´ì•¼ í•œë‹¤.      
* ì¢…ë£Œ ë©”ì„œë“œì— ëŒ€í•œ í˜¸ì¶œë„ í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ í•´ì•¼í•œë‹¤.    
  
# í”„ë¡œí† íƒ€ì…ê³¼ ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©ì‹œ ë¬¸ì œì      
í”„í† í† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ìš”ì²­í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í•­ìƒ ìƒˆë¡œìš´ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.               
í•˜ì§€ë§Œ, **`ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ ë¹ˆ`ë‚´ì— `í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ ë¹ˆ`ì´ ì¡´ì¬í•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ? ğŸ¤”**                  
ìš°ë¦¬ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ ì‹±ê¸€í„´ì€ ì‹±ê¸€í„´ëŒ€ë¡œ, í”„ë¡œí† íƒ€ì…ì€ í”„ë¡œí† íƒ€ì… ë¹ˆëŒ€ë¡œ ì‹¤í–‰ì´ ë ê¹Œ?      
   
**SingletonWithPrototypeTest1**
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonWithPrototypeTest1 {

    @Test
    void prototypeFind() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);

        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);
        prototypeBean1.addCount();
        assertThat(prototypeBean1.getCount()).isEqualTo(1);

        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);
        prototypeBean2.addCount();
        assertThat(prototypeBean2.getCount()).isEqualTo(1);
    }

    @Test
    void singletonClientUsePrototype() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(ClientBean.class, PrototypeBean.class);

        ClientBean clientBean1 = ac.getBean(ClientBean.class);
        ClientBean clientBean2 = ac.getBean(ClientBean.class);

        assertThat(clientBean1.logic()).isEqualTo(1);
        assertThat(clientBean2.logic()).isEqualTo(2);

    }


    @Scope("singleton")
    static class ClientBean {
        private final PrototypeBean prototypeBean;

        @Autowired
        public ClientBean(PrototypeBean prototypeBean) {
            this.prototypeBean = prototypeBean;
        }

        public int logic() {
            prototypeBean.addCount();
            return prototypeBean.getCount();
        }

    }

    @Scope("prototype")
    static class PrototypeBean {
        private int count = 0;

        public void addCount() {
            count++;
        }

        public int getCount() {
            return count;
        }

        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init " + this);
        }

        @PreDestroy
        public void destroy() {
            System.out.println("PrototypeBean.destroy");
        }
    }
}
```
```java
    @Test
    void singletonClientUsePrototype() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(ClientBean.class, PrototypeBean.class);

        ClientBean clientBean1 = ac.getBean(ClientBean.class);
        ClientBean clientBean2 = ac.getBean(ClientBean.class);

        assertThat(clientBean1.logic()).isEqualTo(1);
        assertThat(clientBean2.logic()).isEqualTo(2);

    }
```
ìœ„ ì½”ë“œì˜ ë‚´ë¶€ ë™ì‘ì— ëŒ€í•´ì„œ ì„¤ëª…í•´ë³´ìë©´ `ClientBean` ë¹ˆì„ ë§Œë“¤ë©´ì„œ   
`í”„ë¡œí† íƒ€ì… ë¹ˆ`ì¸ `PrototypeBean`ì„ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ë°›ëŠ”ë‹¤.    

```java
    @Scope("singleton")
    static class ClientBean {
        private final PrototypeBean prototypeBean;

        @Autowired
        public ClientBean(PrototypeBean prototypeBean) {
            this.prototypeBean = prototypeBean;
        }

        public int logic() {
            prototypeBean.addCount();
            return prototypeBean.getCount();
        }

    }
```    
í•˜ì§€ë§Œ, `ClientBean`ì€ ìƒì„±ê³¼ ë™ì‹œì— `ì˜ì¡´ ê´€ê³„ ì£¼ì…`ì„ ì§„í–‰í•˜ê³  ìˆë‹¤.     
ê·¸ë ‡ê¸°ì— `í”„ë¡œí† íƒ€ì… ë¹ˆ`ì´ë¼ë„, ê²°ê³¼ì ìœ¼ë¡œ ë°˜í™˜ë˜ëŠ” `ClientBean`ì€ ì´ë¯¸ ìƒì„±ëœ ì‹±ê¸€í†¤ì´ë¯€ë¡œ    
í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šê³ , ë§ˆì¹˜ ì‹±ê¸€í†¤ì²˜ëŸ¼ ë™ì‘ì„ í•˜ëŠ” ë¹ˆì´ ë˜ì–´ë²„ë¦°ë‹¤.     

```java

    @Scope("singleton")
    static class ClientBean {
        private PrototypeBean prototypeBean;


        @Autowired
        public void setPrototypeBean(PrototypeBean prototypeBean) {
            this.prototypeBean = prototypeBean;
        }

        public int logic() {
            prototypeBean.addCount();
            return prototypeBean.getCount();
        }

    }
```
**ì°¸ê³ ë¡œ,** ìƒì„±ì ì£¼ì…ì„ ë°›ëŠ” ì½”ë“œë¥¼ Setter ì£¼ì…ìœ¼ë¡œ ë°”ê¾¸ì–´ë„ ê²°ê³¼ëŠ” ë§ˆì°¬ê°€ì§€ì´ë‹¤.   
     
ê·¸ë¦¬ê³  ìœ„ì—ì„œ `ë§ˆì¹˜ ì‹±ê¸€í†¤ì²˜ëŸ¼ ë™ì‘`ì„ í•œë‹¤ê³  ì´ì•¼ê¸°ë¥¼ í–ˆë‹¤.   
ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì¡°ê¸ˆ ì„¤ëª…í•´ë³´ê¸° ìœ„í•´, `PrototypeBean`ì„ ì˜ì¡´ ê´€ê³„ ì£¼ì…ë°›ëŠ” ê°ì²´ê°€ í•˜ë‚˜ ë” ìˆë‹¤ ê°€ì •í•œë‹¤.   

```java
    @Test
    void singletonClientUsePrototype() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(ClientBean.class, ClientBean2.class, PrototypeBean.class);

        ClientBean clientBean1 = ac.getBean(ClientBean.class);
        ClientBean2 clientBean2 = ac.getBean(ClientBean2.class);

        assertThat(clientBean1.logic()).isEqualTo(1);
        assertThat(clientBean2.logic()).isEqualTo(1);

    }


    @Scope("singleton")
    static class ClientBean {
        private PrototypeBean prototypeBean;


        @Autowired
        public void setPrototypeBean(PrototypeBean prototypeBean) {
            this.prototypeBean = prototypeBean;
        }

        public int logic() {
            prototypeBean.addCount();
            return prototypeBean.getCount();
        }

    }

    @Scope("singleton")
    static class ClientBean2 {
        private PrototypeBean prototypeBean;


        @Autowired
        public void setPrototypeBean(PrototypeBean prototypeBean) {
            this.prototypeBean = prototypeBean;
        }

        public int logic() {
            prototypeBean.addCount();
            return prototypeBean.getCount();
        }

    }
```
```java
PrototypeBean.init hello.core.scope.SingletonWithPrototypeTest1$PrototypeBean@11fc564b   
PrototypeBean.init hello.core.scope.SingletonWithPrototypeTest1$PrototypeBean@3f56875e  
```  
ì´ ê°™ì€ ê²½ìš°ëŠ” ë‘ ë¹ˆ ëª¨ë‘ ì‹±ê¸€í„´ì´ì§€ë§Œ,           
ì£¼ì…ë˜ëŠ” ë¹ˆì€ í”„ë¡œí† íƒ€ì… ë¹ˆì´ë¯€ë¡œ ê°ê°ì˜ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì— ìƒˆë¡œìš´ ê°ì²´ë¡œ ìƒì„±ë˜ì–´ ì£¼ì…í•œë‹¤.         
     
# Dependecy Lookupì„ ìœ„í•œ Provider          
ì‹±ê¸€í†¤ ë¹ˆê³¼ í”„ë¡œí† íƒ€ì… ë¹ˆì„ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ,          
ì–´ë–»ê²Œ í•˜ë©´ ì‚¬ìš©í•  ë•Œ ë§ˆë‹¤ í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•  ìˆ˜ ìˆì„ê¹Œ?        
         

```java
 static class ClientBean {
     @Autowired
     private ApplicationContext ac;
     
     public int logic() {
         PrototypeBean prototypeBean = ac.getBean(PrototypeBean.class);
         prototypeBean.addCount();
         int count = prototypeBean.getCount();
         return count;
     }
 }
```  
ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œëŠ” `ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë¹ˆ`ì„ ì˜ì¡´ ê´€ê³„ ì£¼ì…ë°›ì•„          
`ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë¹ˆ`ì˜ `getBean()`ì„ í™œìš©í•˜ì—¬ ì§ì ‘ í”„ë¡œí† íƒ€ì… ë¹ˆì„ êº¼ë‚´ì˜¤ë©´ ëœë‹¤.           
        
ì´ë ‡ë“¯, ì˜ì¡´ ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…(DI) ë°›ëŠ”ê²Œ ì•„ë‹ˆë¼      
**ì§ì ‘ í•„ìš”í•œ ì˜ì¡´ ê´€ê³„ë¥¼ ì°¾ëŠ” ê²ƒì„ Dependency Lookup (DL) ì˜ì¡´ê´€ê³„ ì¡°íšŒ(íƒìƒ‰)** ì´ë¼ í•œë‹¤.       
             
ê·¸ëŸ°ë° ì´ë ‡ê²Œ ìŠ¤í”„ë§ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ì „ì²´ë¥¼ ì£¼ì…ë°›ê²Œ ë˜ë©´,        
`ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ`ì— ì¢…ì†ì ì¸ ì½”ë“œê°€ ë˜ê³ , ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë„ ì–´ë ¤ì›Œì§„ë‹¤.       
          
ì§€ê¸ˆ í•„ìš”í•œ ê¸°ëŠ¥ì€ ì§€ì •í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì»¨í…Œì´ë„ˆì—ì„œ ëŒ€ì‹  ì°¾ì•„ì£¼ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ     
ë”±! DL ì •ë„ì˜ ê¸°ëŠ¥ë§Œ ì œê³µí•˜ëŠ” ë¬´ì–¸ê°€ê°€ ìˆìœ¼ë©´ ëœë‹¤.     
   
## ObjectFactory, ObjectProvider   
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ íŠ¹ì •í•œ ë¹ˆì„ ì°¾ì•„ì˜¬ ìˆ˜ ìˆëŠ” `ObjectProvider`ë¹ˆì´ ì¡´ì¬í•œë‹¤.     
  
```java
    @Autowired
    private ObjectProvider<PrototypeBean> prototypeBeanProvider;

    public int logic() {
        PrototypeBean prototypeBean = prototypeBeanProvider.getObject();
        prototypeBean.addCount();
        int count = prototypeBean.getCount();
        return count;
    }
```      
   
`prototypeBeanProvider.getObject()`ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ í•´ë‹¹ ë¹ˆì„ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤. (DL)     
`ObjectProvider` ì˜ `getObject()` ë¥¼ í˜¸ì¶œí•˜ë©´ ë‚´ë¶€ì—ì„œëŠ” ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ë§Œ,          
ê¸°ëŠ¥ì´ ë‹¨ìˆœí•˜ë¯€ë¡œ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê±°ë‚˜ mock ì½”ë“œë¥¼ ë§Œë“¤ê¸°ë„ í›¨ì”¬ ì‰¬ì›Œì§„ë‹¤.       
ObjectProvider ëŠ” ì§€ê¸ˆ ë”± í•„ìš”í•œ DL ì •ë„ì˜ ê¸°ëŠ¥ë§Œ ì œê³µí•˜ê³  ìˆë‹¤.      
      
ì°¸ê³ ë¡œ, `ObjectProvider` ë“±ì¥ ì´ì „ì—ëŠ” `ObjectFactory`ì´ë¼ëŠ”ê²Œ ìˆì—ˆë‹¤.       
`ObjectFactory`ëŠ” ì§„ì§œ ì˜¤ë¡œì§€ ìˆœìˆ˜ DL ê¸°ëŠ¥ë§Œì„ ì œê³µí•´ì¤€ë‹¤.   
`ObjectProvider`ëŠ” DL ê¸°ëŠ¥ ì™¸ì—ë„ 
   
**íŠ¹ì§•**   
ObjectFactory: ê¸°ëŠ¥ì´ ë‹¨ìˆœ, ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš” ì—†ìŒ, ìŠ¤í”„ë§ì— ì˜ì¡´   
ObjectProvider: ObjectFactory ìƒì†, ì˜µì…˜, ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ë“± í¸ì˜ ê¸°ëŠ¥ì´ ë§ê³ , ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš”ì—†ìŒ, ìŠ¤í”„ë§ì— ì˜ì¡´    
   
ì•ì„œ, `ObjectProvider` ì˜ `getObject()`ëŠ” ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ì§€ë§Œ, ë‹¨ìœ„í…ŒìŠ¤íŠ¸ê°€ ëœë‹¤ê³  í–ˆë‹¤.         
í•˜ì§€ë§Œ, ê²°êµ­ì—ëŠ” ìŠ¤í”„ë§ì— ì˜ì¡´ëœ ìƒíƒœì´ë¯€ë¡œ ìˆœìˆ˜ ìë°”ë¡œë§Œ ì´ì–´ì§„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸°ëŠ” í˜ë“¤ ê²ƒì´ë‹¤.        
       
  





