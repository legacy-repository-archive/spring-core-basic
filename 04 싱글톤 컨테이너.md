# ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì‹±ê¸€í†¤   
ìŠ¤í”„ë§ì€ íƒœìƒì´ ê¸°ì—…ìš© ì˜¨ë¼ì¸ ì„œë¹„ìŠ¤ ê¸°ìˆ ì„ ì§€ì›í•˜ê¸° ìœ„í•´ íƒ„ìƒë˜ì—ˆë‹¤.      
ê·¸ë ‡ê¸°ì— ëŒ€ë¶€ë¶„ì˜ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.    
ë¬¼ë¡ , ì›¹ì´ ì•„ë‹Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œë„ ì–¼ë§ˆë“ ì§€ ê°œë°œí•  ìˆ˜ë„ ìˆë‹¤.      
        
ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ ê³¼ì •ì—ì„œ      
ì—¬ëŸ¬ ì‚¬ëŒì´ ì ‘ê·¼í•´ì„œ ë™ì‹œì— ì—¬ëŸ¬ `request`ë¥¼ ë³´ë‚´ë©´ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë™ì‘ì„ í• ê¹Œ?      
ë¬¼ë¡ , ì´ì „ì— ìš°ë¦¬ê°€ ë°°ì› ë“¯ì´ `DI ì»¨í…Œì´ë„ˆ`ì— ë“±ë¡ëœ ë¹ˆì„ ê°€ì§€ê³  ìš”ì²­ì„ ì²˜ë¦¬í•  ê²ƒì´ë‹¤.      
ê·¸ëŸ°ë° **ì—¬ëŸ¬ ì‚¬ëŒì´ ë™ì‹œì— ì—¬ëŸ¬ `request`ë¥¼ ë³´ë‚¸ë‹¤ëŠ”ê±°ë‹ˆê¹Œ ê°ì²´ë„ ê·¸ë§Œí¼ ë§ì´ ìƒì„±ë˜ì–´ì•¼ í•˜ë‚˜?ğŸ¤”**     
ê·¸ë ‡ë‹¤ë©´ **1000ëª…, 10000ëª…, 1ì–µëª…ì´ ë“¤ì–´ì˜¨ë‹¤ë©´ ê·¸ë§Œí¼ ê°ì²´ë¥¼ ìƒì„±í•´ì•¼í•˜ë‚˜?** ë¼ëŠ” ì˜ì‹¬ì´ ë“¤ ìˆ˜ ìˆë‹¤.    
                
ìš°ì„ , ê²°ë¡ ë¶€í„° ë§í•˜ë©´ ìŠ¤í”„ë§ì€ ê¸°ë³¸ì ìœ¼ë¡œ `ì‹±ê¸€í†¤`ìœ¼ë¡œ ë¹ˆì„ ê´€ë¦¬í•œë‹¤.             
ê·¸ë¦¬ê³  `WAS`ì˜ ì“°ë ˆë“œí’€ì— ì¡´ì¬í•˜ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œë¥¼ í†µí•´ `ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼`ì„ í•˜ëŠ” ê²ƒì´ë‹¤.   
(ë¬¼ë¡ , ì´ ê³¼ì •ì—ì„œ `thread-safe`í•œ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.)        
      
ì´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤.  
ìš°ì„ ì€, AppConfigì—ì„œ ë°”ë¡œ ê°ì²´ë¥¼ ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹  
ì¦‰, ì‹±ê¸€í†¤ì´ ì ìš©ë˜ì§€ ì•Šì€ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ê² ë‹¤.   

```java
package hello.core.singleton;

import hello.core.AppConfig;
import hello.core.member.MemberService;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonTest {

    @DisplayName("ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜ DI ì»¨í…Œì´ë„ˆ")
    @Test
    void pureContainer() {
        AppConfig appConfig = new AppConfig();
        // 1. ì¡°íšŒ -> í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±í•˜ëŠ”ì§€ ì¡°íšŒ
        MemberService memberService = appConfig.memberService();

        // 2. ì¡°íšŒ -> í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±í•˜ëŠ”ì§€ ì¡°íšŒ
        MemberService memberService2 = appConfig.memberService();

        // ì°¸ì¡°ê°’ì´ ë‹¤ë¥¸ì§€ í™•ì¸
        assertThat(memberService).isNotSameAs(memberService2);
    }


}
```
ìˆœìˆ˜í•œ `DI ì»¨í…Œì´ë„ˆ`ì¸ `AppConfig`ëŠ” ìš”ì²­ì„ í•  ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒˆë¡œ ìƒì„±í•œë‹¤.      
ë§Œì•½, ê³ ê° íŠ¸ë˜í”½ì´ ì´ˆë‹¹ 100ì´ ë‚˜ì˜¤ë©´ ì´ˆë‹¹ 100ê°œì˜ ê°ì²´ê°€ ìƒì„±ë˜ê³  ì†Œë©¸ëœë‹¤!        
ì¦‰, ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ì‹¬í•˜ë‹¤.           
í•´ê²°ë°©ì•ˆì€ í•´ë‹¹ ê°ì²´ê°€ ë”± 1ê°œë§Œ ìƒì„±ë˜ê³ , ê³µìœ í•˜ëŠ” ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ì„¤ê³„í•˜ë©´ ëœë‹¤.              
  
# ì‹±ê¸€í†¤ íŒ¨í„´   
ì‹±ê¸€í†¤ íŒ¨í„´ì´ë€, **ì¸ìŠ¤í„´ìŠ¤ê°€ ë”± 1ê°œë§Œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì´ë‹¤.**     
ì£¼ë¡œ, `private` ìƒì„±ìë¥¼ ì‚¬ìš©í•´ì„œ ì™¸ë¶€ì—ì„œ ì„ì˜ë¡œ **new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ì•„ì•¼ í•œë‹¤**     
ì‹±ê¸€í†¤ íŒ¨í„´ì— ëŒ€í•´ì„œ [í•„ìê°€ ì •ë¦¬í•œ ë‚´ìš©]()ì´ ìˆìœ¼ë‹ˆ ì—¬ê¸¸ ì°¸ê³ í•˜ëŠ” ê±¸ ì ê·¹ ì¶”ì²œí•œë‹¤.     
  
```java
public final class SingletonService {

    private static final SingletonService instance = new SingletonService();

    private SingletonService() {}

    public static final SingletonService getInstance() {
        return instance;
    }

    public void logic() {
        System.out.println("ì‹±ê¸€í†¤ ê°ì²´ ë¡œì§ í˜¸ì¶œ");
    }
}
```
1. `static` ì˜ì—­ì— ê°ì²´ `instance`ë¥¼ ë¯¸ë¦¬ í•˜ë‚˜ ìƒì„±í•´ì„œ ì˜¬ë ¤ë‘”ë‹¤.        
2. ì´ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•˜ë©´ ì˜¤ì§ `getInstance() ë©”ì„œë“œ`ë¥¼ í†µí•´ì„œë§Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.   
  ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ í•­ìƒ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.      
3. ë”± 1ê°œì˜ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë§Œ ì¡´ì¬í•´ì•¼ í•˜ë¯€ë¡œ, ìƒì„±ìë¥¼ `private`ìœ¼ë¡œ ë§‰ì•„ì„œ        
í˜¹ì‹œë¼ë„ ì™¸ë¶€ì—ì„œ `new` í‚¤ì›Œë“œë¡œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ ë§‰ëŠ”ë‹¤.        

```java
  
package hello.core.singleton;

import hello.core.AppConfig;
import hello.core.member.MemberService;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonTest {

    @DisplayName("ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜ DI ì»¨í…Œì´ë„ˆ")
    @Test
    void pureContainer() {
        AppConfig appConfig = new AppConfig();
        // 1. ì¡°íšŒ -> í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±í•˜ëŠ”ì§€ ì¡°íšŒ
        MemberService memberService1 = appConfig.memberService();

        // 2. ì¡°íšŒ -> í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„±í•˜ëŠ”ì§€ ì¡°íšŒ
        MemberService memberService2 = appConfig.memberService();

        // ì°¸ì¡°ê°’ì´ ë‹¤ë¥¸ì§€ í™•ì¸
        assertThat(memberService1).isNotSameAs(memberService2);
    }

    @DisplayName("ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•œ ì‚¬ë¡€")
    @Test
    void singletonServiceTest() {
        SingletonService singletonService1 = SingletonService.getInstance();
        SingletonService singletonService2 = SingletonService.getInstance();

        System.out.println("singletonService1 = " + singletonService1);
        System.out.println("singletonService2 = " + singletonService2);

        assertThat(singletonService1).isSameAs(singletonService2);

        singletonService1.logic();
    }

}
```
