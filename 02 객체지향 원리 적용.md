# κ°μ²΄μ§€ν–¥ μ›λ¦¬ μ μ©
## μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°    
* **μ•…λ• κΈ°νμ :** 
  μ„λΉ„μ¤ μ¤ν” μ§μ „μ— ν• μΈ μ •μ±…μ„ μ§€κΈμ²λΌ κ³ μ • κΈμ•΅ ν• μΈμ΄ μ•„λ‹λΌ    
  μΆ€ λ” ν•©λ¦¬μ μΈ μ£Όλ¬Έ κΈμ•΅λ‹Ή ν• μΈν•λ” μ •λ¥  ν• μΈμΌλ΅ λ°”κΎΈκ³  μ‹¶μ–΄μ” 
  μλ¥Ό λ“¤λ©΄, VIPλ” 10% ν• μΈμ„ μ‹μΌμ£Όλ”κ±°μ£    
* **μμ§„ κ°λ°μ :**   
  μ²μ λ¶€ν„° κ·Έκ±΄ μ•„λ‹λΌκ³  ν–μ–μ•„μ”...
* **μ•…λ• κΈ°νμ :**    
  **[μ• μμΌ μ†ν”„νΈμ›¨μ–΄ κ°λ° μ„ μ–Έ](https://agilemanifesto.org/iso/ko/manifesto.html) λ°λΌμ”? κ³„νμ„ λ”°λ¥΄κΈ°λ³΄λ‹¤λ” λ³€ν™”μ— λ€μ‘ν•κΈ°λ¥Ό..**   
      
μ΄μ „μ— μ‘μ„±ν–λ `DiscountPolicy` μΈν„°νμ΄μ¤λ¥Ό κΈ°λ°μΌλ΅, `DiscountPolicy` ν΄λμ¤λ¥Ό κµ¬ν„ν•λ‹¤.       

**DiscountPolicy κµ¬ν„**
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy{

    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade() == Grade.VIP){
            return price * discountPercent / 100;
        }
        return 0;
    }
}
```
   
**DiscountPolicy ν…μ¤νΈλ¥Ό μ„ν• DiscountPolicyTest κµ¬ν„**    
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.*;

class RateDiscountPolicyTest {

    DiscountPolicy discountPolicy = new RateDiscountPolicy();


    @Test
    @DisplayName("VIPλ” 10% ν• μΈμ΄ μ μ©λμ–΄μ•Ό ν•λ‹¤")
    void vip_o() {
        // given
        Member member = new Member(1L, "memberVIP", Grade.VIP);

        // when
        int discount = discountPolicy.discount(member, 10000);

        // then
        assertThat(discount).isEqualTo(1000);
    }

    @Test
    @DisplayName("VIPκ°€ μ•„λ‹λ©΄ 10% ν• μΈμ΄ μ μ©λμ§€ μ•μ•„μ•Ό ν•λ‹¤")
    void vip_x() {
        // given
        Member member = new Member(2L, "memberVIP", Grade.BASIC);

        // when
        int discount = discountPolicy.discount(member, 10000);

        // then
        assertThat(discount).isEqualTo(0);
    }
}
```

## μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ   
μƒλ΅μ΄ ν• μΈ μ •μ±…μ„ μ μ©ν•κΈ° μ„ν•΄, `OrderServiceImpl` μ½”λ“λ¥Ό μμ •ν•κ³ μ ν•λ‹¤.   

**λ³€κ²½ μ „**
```java
    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
```
   
**λ³€κ²½ ν›„**
```java
    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
```

ν•μ§€λ§, λ§μ•½ μ΄μ™€ κ°™μ€ μ½”λ“κ°€ 100κ°, 1000κ°, 10000κ°κ°€ μλ‹¤λ©΄...?   
μ΄κ°™μ΄ μ£Όμ„μ„ μ²λ¦¬ν•κ³  μƒλ΅μ΄ ν΄λμ¤λ¥Ό λ„£μ–΄μ£Όλ” μ‘μ—…μ„ μΌμΌν λ‹¤ ν•΄μ•Όν•λ‹¤.    

**λ¬Έμ μ  λ°κ²¬**   
* μ°λ¦¬λ” μ—­ν• κ³Ό κµ¬ν„μ„ μ¶©μ‹¤ν•κ² λ¶„λ¦¬ν–λ‹¤ -> OK  
* λ‹¤ν•μ„±λ„ ν™μ©ν•κ³ , μΈν„°νμ΄μ¤μ™€ κµ¬ν„μ²΄λ¥Ό λ¶„λ¦¬ν–λ‹¤ -> OK
* OCP, DIP κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¶©μ‹¤ν μ¤€μν–λ‹¤. -> β κ·Έλ ‡κ² λ³΄μ΄μ§€λ§ μ•„λ‹λ‹¤.     
* DIP: μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ `OrderServiceImpl`λ” `DiscountPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ³  μλ‹¤.  
  * ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό μ‚΄ν΄λ³΄λ©΄, μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬ν„ ν΄λμ¤λ„ μμ΅΄ν•κ³  μλ‹¤.   
  * μ΄λ¥Ό μΆ€ λ” μ‰½κ² ν‘ν„ν•λ©΄ κµ¬ν„μ²΄κ°€ μ–΄λ–¤ κµ¬ν„μ²΄μΈμ§€ μ •ν™•ν μ•κ³  μλ” μƒνƒμ΄λ‹¤(new ν–μΌλ‹)    
    * μ¶”μƒ μΈν„°νμ΄μ¤ μμ΅΄ : DiscountPolicy
    * κµ¬ν„ ν΄λμ¤ μμ΅΄ : FixDiscountPolicy, RateDiscountPolicy
* OCP : μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³  κΈ°λ¥μ„ λ³€κ²½, μ½”λ“λ¥Ό ν™•μ¥ν•  μ μλ‹¤λ” κ°λ…         
  * μ§€κΈ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•λ©΄, ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ λ―ΈμΉλ‹¤. λ”°λΌμ„ **OCPλ¥Ό μ„λ°**ν•λ‹¤.     
      
**κ·Έλ ‡λ‹¤λ©΄ μ–΄λ–»κ² ν•΄κ²°ν• κΉ?π¤”**   
ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ `OrderServiceImpl` μ€      
`DiscountPolicy` μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬ν„ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•λ‹¤.     
κ·Έλμ„ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ³€κ²½ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•λ‹¤.    
  
κ·Έλ ‡λ‹¤λ©΄ μ–΄λ–»κ² ν•΄κ²°ν• κΉ? μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•λ©΄ λλ‹¤.     
* **DIP μ„λ°** -> μ¶”μƒμ—λ§ μμ΅΄ν•λ„λ΅ λ³€κ²½ν•λ‹¤.(μΈν„°νμ΄μ¤μ—λ§ μμ΅΄)      
    
**μΈν„°νμ΄μ¤λ§ μμ΅΄ μ½”λ“**
```java
public class OrderServiceImpl {
    ...
    private final DiscountPolicy discountPolicy;

    ...
}
```
* μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“λ¥Ό κµ¬ν„ν–λ‹¤.  
* ν•μ§€λ§ κµ¬ν„μ²΄λ¥Ό ν• λ‹Ήμ‹ν‚¤μ§€ μ•μ•„μ„ `NullPointerException` μ΄ λ°μƒν•λ‹¤.   
  
**ν•΄κ²° λ°©μ•**    
μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ ¤λ©΄,      
λ„κµ°κ°€ ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl`μ—     
`DiscountPolicy`μ κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.     

## κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬  
μ• ν”λ¦¬μΌ€μ΄μ…μ„ ν•λ‚μ λ΅λ―Έμ¤μ™€ μ¤„λ¦¬μ—£ κ³µμ—°μ΄λΌ μƒκ°ν•μ.       
λ΅λ―Έμ¤μ™€ μ¤„λ¦¬μ—£μ€ λ„κ°€ λλμ§€ κ³µμ—°λ§ μ λ§λ¬΄λ¦¬ν•λ©΄ μƒκ΄€μ΄ μ—†λ‹¤.      
ν•μ§€λ§, ν• κ°€μ§€ μ°λ¦¬λ” κ°„κ³Όν•κ³  μλ” μ‚¬μ‹¤μ΄ μλ‹¤.        
λ΅λ―Έμ¤μ™€ μ¤„λ¦¬μ—£ **λ°°μ—­μ„ λ§΅μ„ λ°°μ°λ” λ„κ°€ μ •ν•΄μ£Όλ” κ²ƒμΈκ°€?**        

λ§μ•½ λ΅λ―Έμ¤ μ—­ν• μ„ λ§΅λ” λ””μΉ΄ν”„λ¦¬μ¤κ°€ μ΄κ°™μ€ μ—­ν• μ„ ν•λ‹¤κ³  κ°€μ •ν•΄λ³΄λ©΄ 
λ΅λ―Έμ¤λ” μ•„λμ™€ κ°™μ€ μ—­ν• κ³Ό μ±…μ„μ„ κ°€μ§„λ‹¤.  

* μ‹¤μ  μ—°κ·Ήμ„ μν–‰ν•  λ΅λ―Έμ¤ μ—­ν•  
* λ°°μ°λ¥Ό μ„­μ™Έν•κ³  λ°°μ—­μ„ μ§€μ •ν•΄μ£Όλ” μ—­ν•   
   
μ΄μ™€ κ°™μ€ μ‚¬μ‹¤λ΅ λ―Έλ£¨μ–΄λ³Ό λ•, λ°°μ°κ°€ λ°°μ—­μ„ ν• λ‹Ήν•λ” μ—­ν• μ„ λ„λ§΅μΌλ©΄       
λ‹¤μ–‘ν•  μ—­ν• κ³Ό μ±…μ„μ„ κ°€μ§„ ν•  μΌμ΄ λ§μ€ μ‚¬λμ΄ λλ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.    
 
**β” κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•μ**     
* λ°°μ°λ” λ³ΈμΈμ μ—­ν• μΈ λ°°μ—­μ„ μν–‰ν•λ” κ²ƒμ—λ§ μ§‘μ¤‘ν•΄μ•Όν•λ‹¤.    
* λ°°μ°λ” μƒλ€ μ—¬μ λ°°μ—­λ¶„μ΄ μ–΄λ–¤ λ¶„μ΄ μ¤λ”λΌλ„ μ—­ν• μ„ μ¶©μ‹¤ν μν–‰ν•΄μ•Όν•λ‹¤.   
* κ³µμ—°μ„ κµ¬μ„±ν•κ³ , λ‹΄λ‹Ή λ°°μ°λ¥Ό μ„­μ™Έν•κ³ , λ°°μ°λ¥Ό μ§€μ •ν•λ” μ±…μ„μ€ **κ³µμ—° κΈ°νμ**κ°€ ν•΄μ•Όν•  μΌμ΄λ‹¤.  
* κ³µμ—° κΈ°νμκ°€ μ—†λ‹¤λ©΄ μ΄λ¥Ό λ§λ“¤κ³ , λ°°μ°μ™€ κ³µμ—° κΈ°νμμ μ±…μ„μ„ ν™•μ‹¤ν λ¶„λ¦¬ν•μ   
  
### AppConfig λ“±μ¥     
μ• ν”λ¦¬μΌ€μ΄μ…μ λ™μ‘ λ°©μ‹μ„ κµ¬μ„±`(config)`ν•κΈ° μ„ν•΄,     
**κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±**ν•κ³ , **μ—°κ²°**ν•λ” μ±…μ„μ„ κ°€μ§€λ” λ³„λ„μ μ„¤μ • ν΄λμ¤λ¥Ό λ§λ“¤μ     

```java
package hello.core;

import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }

}
```
`AppConfig`λ” μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• `κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±`ν•λ‹¤.       
   
* MemberServiceImpl
* MemoryMemberRepository  
* OrderServiceImpl  
* FixDiscountPolicy  

`AppConfig`λ” μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°λ¥Ό `μƒμ„±μλ¥Ό ν†µν•΄μ„ μ£Όμ…`ν•΄μ¤€λ‹¤.     
* MemberServiceImpl -> MemoryMemberRepository  
* OrderServiceImpl -> MemoryMemberRepository, FixDiscountPolicy   
  
μ°Έκ³  : μ΄ κ°™μ€ μ½”λ“λ¥Ό μ μ©ν•κΈ° μ„ν•΄,     
κΈ°μ΅΄ `new ν΄λμ¤`ν•λ” μμ—­μ„ μƒμ„±μλ΅ μ£Όμ…λ°›λ„λ΅ μ½”λ“λ¥Ό μμ •ν•λ‹¤.     
  
**MemberServiceImpl**   
```java
package hello.core.member;

public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }

}
```

* μ„¤κ³„ λ³€κ²½μΌλ΅ `MemberServiceImpl`μ€ `MemoryMeberRepository`λ¥Ό μμ΅΄ν•μ§€ μ•λ”λ‹¤.     
* λ‹¨μ§€, `MemberRepoistory`μΈν„°νμ΄μ¤λ§ μμ΅΄ν•λ‹¤.     
* `MemberServiceImpl` μ…μ¥μ—μ„ μƒμ„±μλ¥Ό ν†µν•΄ **μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ λ“¤μ–΄μ¬μ§€λ” μ• μ μ—†λ‹¤.**      
* `MemberServiceImpl` μ€ μ΄μ λ¶€ν„° **μμ΅΄κ΄€κ³„μ— λ€ν• κ³ λ―Όμ€ μ™Έλ¶€μ— λ§΅κΈ°κ³  `μ‹¤ν–‰μ—λ§ μ§‘μ¤‘`** ν•λ©΄ λλ‹¤.    

μ΄μ λ¶€ν„°, κ°μ²΄μ μƒμ„±κ³Ό μ—°κ²°μ€ `ApppConfig`κ°€ λ‹΄λ‹Ήν•λ‹¤.      
* **DIP μ™„μ„± :** 
  `MemberServiceImpl`μ€ `MemberRepository`μΈ μ¶”μƒμ—λ§ μμ΅΄ν•λ©΄ λλ‹¤.   
  μ¦‰, μ΄μ λ¶€ν„° κµ¬μ²΄ ν΄λμ¤λ¥Ό λ°λΌλ„ λλ‹¤.   
* **κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬ :**  
  κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ—­ν• κ³Ό μ‹¤ν–‰ν•λ” μ—­ν• μ΄ λ…ν™•ν λ¶„λ¦¬λμ–΄μλ‹¤.   
   
**OrderServiceImpl**
```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;

public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```
* μ„¤κ³„ λ³€κ²½μΌλ΅ `OrderServiceImpl`μ€ `FixDiscountPolicy`λ¥Ό μμ΅΄ν•μ§€ μ•λ”λ‹¤.
* λ‹¨μ§€ `DiscountPolicy` μΈν„°νμ΄μ¤λ§ μμ΅΄ν•λ‹¤.   
* `OrderServiceImpl`μ…μ¥μ—μ„ μƒμ„±μλ¥Ό ν†µν•΄ μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ μ£Όμ…λ μ§€λ” μ• μ μ—†λ‹¤.   
* `OrderServiceImpl`μ μƒμ„±μλ¥Ό ν†µν•΄μ„ μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ μ£Όμ…λ μ§€λ” `AppConfig`κ°€ κ²°μ •ν•λ‹¤.   
* `OrderServiceImpl`μ€ μ΄μ λ¶€ν„° μ‹¤ν–‰μ—λ§ μ§‘μ¤‘ν•λ©΄ λλ‹¤.    

**μ •λ¦¬**   
* `AppConfig`λ¥Ό ν†µν•΄μ„ κ΄€μ‹¬μ‚¬λ¥Ό ν™•μ‹¤ν λ¶„λ¦¬ν•μ  
* λ°°μ—­, λ°°μ°λ¥Ό μƒκ°ν•΄λ³΄μ    
* AppConfigλ” κ³µμ—° κΈ°νμλ‹¤.   
* AppConfigλ” κµ¬μ²΄ ν΄λμ¤λ¥Ό μ„ νƒν•λ‹¤. λ°°μ—­μ— λ§λ” λ‹΄λ‹Ή λ°°μ°λ¥Ό μ„ νƒν•λ‹¤.      
* μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ–΄λ–»κ² λ™μ‘ν•΄μ•Ό ν• μ§€ μ „μ²΄ κµ¬μ„±μ„ μ±…μ„μ§„λ‹¤.     
* μ΄μ  κ° λ°°μ°λ“¤μ€ λ‹΄λ‹Ή κΈ°λ¥μ„ μ‹¤ν–‰ν•λ” μ±…μ„λ§ μ§€λ©΄ λλ‹¤.    
  
## AppConfig λ¦¬ν©ν„°λ§  

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    private MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    private DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }

}
```
`new MemoryMemberRepository()` μ΄ λ¶€λ¶„μ΄ μ¤‘λ³µ μ κ±°λμ—λ‹¤.   
μ΄μ  `MemoryMemberRepository` λ¥Ό λ‹¤λ¥Έ κµ¬ν„μ²΄λ΅ λ³€κ²½ν•  λ• ν• λ¶€λ¶„λ§ λ³€κ²½ν•λ©΄ λλ‹¤.  

## μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ© 

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    private MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    private DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }

}
```
`AppConfig`μ—μ„ ν• μΈ μ •μ±… μ—­ν• μ„ λ‹΄λ‹Ήν•λ” κµ¬ν„μ„    
`FixDiscountPolicy`μ—μ„ `RateDiscountPolicy()`κ°μ²΄λ΅ λ³€κ²½ν–λ‹¤.    
μ•μΌλ΅λ„ ν• μΈ μ •μ±…μ„ λ³€κ²½ν•  μΌμ΄ μλ‹¤λ©΄, `AppConfig`λ§ μμ •ν•λ©΄ λλ‹¤.   
ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ `OrderServiceImpl`λ¥Ό ν¬ν•¨ν•΄μ„ **μ‚¬μ© μμ—­**μ μ–΄λ–¤ μ½”λ“λ„ λ³€κ²½ν•  ν•„μ”κ°€ μ—†λ‹¤.  
     
**κµ¬μ„± μμ—­**μ€ λ‹Ήμ—°ν λ³€κ²½λλ‹¤.      
κµ¬μ„± μ—­ν• μ„ ν•λ” AppConfigλ¥Ό μ• ν”λ¦¬μΌ€μ΄μ…μ΄λΌλ” κ³µμ—°μ κΈ°νμλ΅ μƒκ°ν•μ      
κ³µμ—° κΈ°νμλ” κ³µμ—° μ°Έμ—¬μμΈ κµ¬ν„ κ°μ²΄λ“¤μ„ λ¨λ‘ μ•μ•„μ•Ό ν•λ‹¤.     
      
![image-20210306153622347](https://user-images.githubusercontent.com/50267433/113473867-33890880-94a7-11eb-9c2e-0879a001ab14.png)
`κµ¬μ„±μμ—­`κ³Ό `μ‚¬μ©μμ—­` λ¶„λ¦¬λ” μ„μ™€ κ°™μ€ κ·Έλ¦ΌμΌλ΅ λ‚νƒ€λ‚λ‹¤.     
μ‚¬μ©μμ—­μ€ μμ‹ μ΄ κ°€λ¦¬ν‚¤κ³  μλ” μΈν„°νμ΄μ¤λ§ μ‹ κ²½μ“°λ” κ²ƒμ΄λ‹¤.     
  
## μΆ‹μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™μ μ μ© 
μ—¬κΈ°κΉμ§€ 3κ°€μ§€ `SRP`,`DIP`,`OCP` μ›μΉ™μ„ μ μ©μ‹μΌ°λ‹¤.     

### SRP λ‹¨μΌ μ±…μ„ μ›μΉ™  
> ν• ν΄λμ¤λ” ν•λ‚μ μ±…μ„μ„ κ°€μ Έμ•Όν•λ‹¤.  
    
* ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ§μ ‘ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•κ³ , μ‹¤ν–‰ν•λ” λ‹¤μ–‘ν• μ±…μ„μ„ κ°€μ§€κ³  μλ‹¤.      
* SRP λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ λ”°λ¥΄λ©΄μ„ κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•λ‹¤.     
* κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ€ AppConfigκ°€ λ‹΄λ‹Ήν•λ‹¤.      
* ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ‹¤ν–‰ν•λ” μ±…μ„λ§ λ‹΄λ‹Ήν•λ‹¤.   

### DIP μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™   
> μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€, κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤.   
> - `μμ΅΄μ„± μ£Όμ…`μ€ μ΄ μ›μΉ™μ„ λ”°λ¥΄λ” λ°©λ²• μ¤‘ ν•λ‚μ΄λ‹¤.  
   
* μƒλ΅μ΄ ν• μΈ μ •μ±…μ„ κ°λ°ν•κ³ , μ μ©ν•λ¬κ³  ν•λ‹ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤.   
  μ™λƒν•λ©΄ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“ `OrderServiceImpl`λ”    
  `DIP`λ¥Ό μ§€ν‚¤λ©° `DiscountPolicy` μ¶”μƒν™” μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ” κ²ƒ κ°™μ§€λ§   
  `FixDiscountPolicy`κΉμ§€ ν•¨κ» μμ΅΄ν•κ³  μμ—λ κ²ƒμ΄λ‹¤.   
* ν΄λΌμ΄μ–ΈνΈκ°€ μΈν„°νμ΄μ¤λ§ μμ΅΄ν•λ„λ΅ ν•΄μ•Όν•λ©° κµ¬ν„μ²΄λ” μƒμ„±μλ¥Ό ν†µν•΄ μ£Όμ…μ‹ν‚¤λ„λ΅ ν•λ‹¤.  

### OCP   
> μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ •μ—λ” μ—΄λ ¤μμΌλ‚, λ³€κ²½μ—λ” λ‹«ν€μμ–΄μ•Ό ν•λ‹¤.   
    
* λ‹¤ν•μ„±μ„ μ‚¬μ©ν•κ³  ν΄λΌμ΄μ–ΈνΈκ°€ DIPλ¥Ό μ§€ν‚¨λ‹¤.     
* μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‚¬μ© μμ—­κ³Ό κµ¬μ„± μμ—­μΌλ΅ λ‚λλ‹¤.  
* AppConfigκ°€ μμ΅΄κ΄€κ³„λ¥Ό `FixDiscountPolicy`μ—μ„ `RateDiscountPolicy`λ΅ λ³€κ²½ν•΄μ„   
  ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μ£Όμ…ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” λ³€κ²½ν•μ§€ μ•μ•„λ„ λλ‹¤.  
* **μ†ν”„νΈμ›¨μ–΄ μ”μ†λ¥Ό μƒλ΅­κ² ν™•μ¥ν•΄λ„ μ‚¬μ© μμ—­μ λ³€κ²½μ€ λ‹«ν€μλ‹¤.**     

## IoC, DI, κ·Έλ¦¬κ³  μ»¨ν…μ΄λ„  
**IoC, μ μ–΄μ μ—­μ „**    
* κΈ°μ΅΄ ν”„λ΅κ·Έλ¨μ€ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ κ°μ²΄κ°€ μ¤μ¤λ΅ ν•„μ”ν• μ„λ²„ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•κ³ , μ‹¤ν–‰ν–λ‹¤.    
  ν•λ§λ””λ΅ κµ¬ν„ κ°μ²΄κ°€ ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ¤μ¤λ΅ μ΅°μΆ…ν–λ‹¤.
  κ°λ°μ μ…μ¥μ—μ„λ” λ§¤μ° μμ—°μ¤λ¬μ΄ νλ¦„μ΄μ—λ‹¤.  
* `AppConfig`μ λ“±μ¥μΌλ΅ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ κ°μ²΄λ” μμ‹ μ λ΅μ§μ„ μ‹¤ν–‰ν•λ” μ—­ν• λ§ λ‹΄λ‹Ήν•κ² λμ—λ‹¤.  
* ν”„λ΅κ·Έλ¨μ— λ€ν• μ μ–΄ νλ¦„μ— λ€ν• κ¶ν•μ€ `AppConfig`κ°€ κ°€μ§€κ³  μλ‹¤.   
  μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• κ°μ²΄λ¥Ό λ‹¤λ£¨λ―€λ΅ λ΅μ§μ μ£Όλ„κ¶μ„ μ΅κ³ μλ‹¤κ³  μƒκ°ν•λ©΄ λλ‹¤.        
* μ΄λ ‡λ“― **ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ§μ ‘ μ μ–΄ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒ**μ„ **μ μ–΄μ μ—­μ „**μ΄λΌκ³  ν•λ‹¤.   

**ν”„λ μ„μ›ν¬ VS λΌμ΄λΈλ¬λ¦¬**    
* ν”„λ μ„μ›ν¬ : λ‚΄κ°€ μ‘μ„±ν• μ½”λ“λ¥Ό μ μ–΄ν•κ³ , λ€μ‹  μ‹¤ν–‰ν•λ‹¤.  
* λΌμ΄λΈλ¬λ¦¬ : λ‚΄κ°€ μ‘μ„±ν• μ½”λ“λ¥Ό λ‚΄κ°€ μ§μ ‘ μ μ–΄ν•λ‹¤.  
* ν•„μ μκ²¬ : λ‚΄κ°€ μ •ν•΄μ§„ ν‹€μ— λ§μ¶”μ–΄ μ½”λ”©, λ‚΄κ°€ μ—¬λ¬ λ„κµ¬λ¥Ό ν™μ©ν•΄μ„ μ½”λ”©  

**DI, μμ΅΄κ΄€κ³„ μ£Όμ…**   
* μμ΅΄κ΄€κ³„λ” **μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„μ™€,**    
  **μ‹¤ν–‰ μ‹μ μ— κ²°μ •λλ” λ™μ μΈ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„** λ‘μ„ λ¶„λ¦¬ν•λ©΄μ„ μƒκ°ν•΄μ•Όν•λ‹¤.    
    
**μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„**    
ν΄λμ¤κ°€ μ‚¬μ©ν•λ” `import`μ½”λ“λ§ λ³΄κ³ λ„ μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² νλ‹¨ν•  μ μλ‹¤.   
μ •μ μΈ μμ΅΄κ΄€κ³„λ” μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰ν•μ§€ μ•μ•„λ„ λ¶„μ„ν•  μ μλ‹¤.   
      
`OrderServiceImpl`μ€ `MemberServiceImpl`κ³Ό `DiscountPolicy`μ— μμ΅΄ν•λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.     
κ·Έλ°λ° μ΄λ¬ν• ν΄λμ¤ μμ΅΄κ΄€κ³„λ§μΌλ΅ μ‹¤μ  μ–΄λ–¤ κ°μ²΄κ°€ `OrderServiceImpl`μ— μ£Όμ…λ μ§€λ” μ• μ μ—†λ‹¤.  

**λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄ κ΄€κ³„**    
μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ μ— μ‹¤μ  μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°κ°€ μ—°κ²°λ μμ΅΄κ΄€κ³„λ‹¤.    

* μ• ν”λ¦¬μΌ€μ΄μ… **μ‹¤ν–‰ μ‹μ (λ°νƒ€μ„)** μ— μ™Έλ¶€μ—μ„ μ‹¤μ  κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•΄μ„   
  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ‹¤μ  μμ΅΄κ΄€κ³„κ°€ μ—°κ²°λλ” κ²ƒμ„ **μμ΅΄κ΄€κ³„ μ£Όμ…**μ΄λΌ λ§ν•λ‹¤.  
* κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•κ³ , κ·Έ μ°Έμ΅° κ°’μ„ μ „λ‹¬ν•΄μ„ μ—°κ²°λλ‹¤.  
* μ™Όμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ ,   
  ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν•λ” λ€μƒμ νƒ€μ… μΈμ¤ν„΄μ¤λ¥Ό λ³€κ²½ν•  μ μλ‹¤.  
* μμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ ,   
  λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² λ³€κ²½ν•  μ μλ‹¤.  

**IOC μ»¨ν…μ΄λ„, DI μ»¨ν…μ΄λ„**   
* AppConfig μ²λΌ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ©΄μ„ μμ΅΄κ΄€κ³„λ¥Ό μ—°κ²°ν•΄ μ£Όλ” κ²ƒμ„   
  **IoC μ»¨ν…μ΄λ„** λλ” **DI μ»¨ν…μ΄λ„**λΌκ³  λ¶€λ¥Έλ‹¤.
* μμ΅΄κ΄€κ³„ μ£Όμ…μ— μ΄μ μ„ λ§μ¶”μ–΄ μµκ·Όμ—λ” μ£Όλ΅ **DIμ»¨ν…μ΄λ„**λΌ ν•λ‹¤.   
* λλ” μ–΄μ…‰λΈ”λ¬, μ¤λΈμ νΈ ν©ν† λ¦¬ λ“±μΌλ΅ λ¶λ¦¬κΈ°λ„ ν•λ‹¤.   





