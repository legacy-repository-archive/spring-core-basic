# μ»΄ν¬λ„νΈ μ¤μΊ”   
μ§€κΈκΉμ§€ μ°λ¦¬λ” `@Bean`μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•κ±°λ‚        
XML μ„¤μ • νμΌμ„ μ΄μ©ν•μ—¬ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— μ§μ ‘ λΉμ„ λ“±λ΅ν–λ‹¤.          
ν•μ§€λ§, λ“±λ΅ν•λ” λΉμ κ°―μκ°€ λ§μ•„μ§μλ΅ μ΄ λν• λ²κ±°λ΅­κ³  κ·€μ°®μ€ μ‘μ—…μ΄ λλ‹¤.  
λ¬΄μ—‡λ³΄λ‹¤ ν•΄λ‹Ή νμΌμ„ μΌμΌν κ΄€λ¦¬ν•΄μ£Όμ–΄μ•Ό ν•λ” λ¶νΈν•¨μ΄ μλ‹¤.    

μ΄λ¥Ό ν•΄μ†ν•΄μ£ΌκΈ° μ„ν•΄, μ¤ν”„λ§μ—μ„λ” `@ComponentScan`μ΄λΌλ” κΈ°λ¥μ„ μ κ³µν•λ‹¤.     
λ μμ΅΄κ΄€κ³„λ„ μλ™μΌλ΅ μ£Όμ…ν•΄μ£Όλ” `@Autowired`λΌλ” κΈ°λ¥λ„ μ κ³µν•΄μ¤€λ‹¤.      

μ°μ„ , μ°λ¦¬λ” κ°λ°μμ΄λ―€λ΅ μ½”λ“λ΅ μ§μ ‘ κΈ°λ¥μ„ μ•μ•„λ³΄μ  
   
**AutoAppConfig**   
```java
package hello.core;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;

// μ»΄ν¬λ„νΈ μ¤μΊ”μ€ λ³„λ‹¤λ¥Έ λ£¨νΈ λ””λ ‰ν„°λ¦¬λ¥Ό μ£Όμ§€ μ•μΌλ©΄ ν„ ν΄λμ¤λ¥Ό λ£¨νΈλ””λ ‰ν† λ¦¬λ΅ μ΅λ”λ‹¤.
// μ¦‰, ν„ ν΄λμ¤λ¶€ν„° ν•μ„ λ””λ ‰ν„°λ¦¬μ @Component μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν΄λμ¤λ¥Ό λΉμΌλ΅ λ“±λ΅ν•λ‹¤.(μ΄ ν΄λμ¤λ„)
// μ μ™Έν•  μ”μ†λ“¤μ„ μ„ νƒν•λ”λ°, AppConfig μ™€ κ°™μ€ @Configuration μ„ μ‚¬μ©ν•λ” ν΄λμ¤λ” μ μ™Έ
@Configuration
@ComponentScan(
        excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = Configuration.class)
)
public class AutoAppConfig {
}
```   
μ΄μ „, `AppConfig`μ™€ λΉ„μ·ν• μ—­ν• μ„ ν•λ” `AutoAppConfig`ν΄λμ¤λ¥Ό μƒμ„±ν–λ‹¤.         
νΉμ΄ν•μ μ€, `@ComponentScan`μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ—κ³  `@Bean`μ„ λ“±λ΅ν• λ©”μ†λ“κ°€ μ—†λ‹¤.         
**κ·Έλ ‡λ‹¤λ©΄ μ–΄λ–»κ² λ™μ‘μ„ ν•λ” κ²ƒμΈκ°€? π¤”**     
           
μ°λ¦¬λ” μ–΄λ…Έν…μ΄μ…μ μ΄λ¦„ κ·Έλ€λ΅μ—μ„ κ·Έ ν•΄λ‹µμ„ μ°Ύμ„ μ μλ‹¤.        
`@ComponentScan` μ–΄λ…Έν…μ΄μ…μ€ `@Component`μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν΄λμ¤λ¥Ό μ°Ύλ”λ‹¤.        
κ·Έλ¦¬κ³  μ°Ύμ€ ν΄λμ¤λ“¤μ„ λΉμΌλ΅ μλ™ λ“±λ΅ν•΄μ£Όλ” μ—­ν• μ„ ν•κ³  μλ‹¤.       
κ·Έλ ‡κΈ°μ— λ”°λ΅ `@Bean`μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ–΄μ„ λΉμ„ λ“±λ΅ν•  ν•„μ”κ°€ μ—†κΈ°μ— μ΄λ¥Ό μ κ±°ν• κ²ƒμ΄λ‹¤.       
      
ν• κ°€μ§€ νΉμ΄μ μΌλ΅λ” `@ComponentScan`μ— μ†μ„±κ°’μ— ν•„ν„° κΈ°λ¥μ„ μ¶”κ°€ν–λ‹¤.       
`excludeFilters`μ€ μ μ™Έν•  ν΄λμ¤λ¥Ό μ§€μ •ν•λ”λ° μ‚¬μ©ν•λ” μ–΄λ…Έν…μ΄μ… μ†μ„±μ΄λ‹¤.     
μ΄μ „, μ°λ¦¬κ°€ μ‚¬μ©ν–λ `AppConfig`μ—μ„λ„ μ°λ¦¬κ°€ λ“±λ΅ν• λΉλ“¤μ΄ μκΈ°μ—      
`@ComponentScan`μΌλ΅ λ“±λ΅ν•  λΉ λ“¤κ³Ό μ¶©λμ΄ μΌμ–΄λ‚κΈ°μ— `@Configuration`μ΄ λ¶™μ€ ν΄λμ¤λ” μ μ™Έν• κ²ƒμ΄λ‹¤.     
  
μ°Έκ³ λ΅, μ»΄ν¬λ„νΈ μ¤μΊ”μ„ μ‚¬μ©ν•λ©΄ `@Configuration` μ΄ λ¶™μ€ μ„¤μ • μ •λ³΄λ„ μλ™μΌλ΅ λ“±λ΅λλ‹¤.      
`@Configuration` μ΄ μ»΄ν¬λ„νΈ μ¤μΊ”μ λ€μƒμ΄ λ μ΄μ λ„       
`@Configuration`μ μ†μ¤μ½”λ“λ¥Ό μ—΄μ–΄λ³΄λ©΄ `@Component` μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ–΄μκΈ° λ•λ¬Έμ΄λ‹¤.    
    
κ·Έλ¬λ©΄ μ΄μ  λΉμΌλ΅ λ“±λ΅ν•  ν΄λμ¤λ“¤μ— `@Component`μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ΄λ¬ κ°€λ³΄μ     
     
**RateDiscountPolicy.class**
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.springframework.stereotype.Component;

@Component
public class RateDiscountPolicy implements DiscountPolicy{

    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade() == Grade.VIP){
            return price * discountPercent / 100;
        }
        return 0;
    }
}
```

**MemoryMemberRepository.class**
```java
package hello.core.member;

import org.springframework.stereotype.Component;

import java.util.HashMap;
import java.util.Map;

@Component
public class MemoryMemberRepository implements MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();

    @Override
    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }

}
```

**MemberServiceImpl.class**
```java
package hello.core.member;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository;

    @Autowired
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }

    // ν…μ¤νΈμ© λ©”μ„λ“
    public MemberRepository getMemberRepository() {
        return memberRepository;
    }

}
```
   
**OrderServiceImpl.class**
```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }

    // ν…μ¤νΈ μ©λ„
    public MemberRepository getMemberRepository() {
        return memberRepository;
    }

}
```
   
___     
   
μ΄μ , μ‹¤μ λ΅ λΉμ΄ λ“±λ΅λμ—λ”μ§€ κ·Έλ¦¬κ³  μ•λ§μ€ ν΄λμ¤νƒ€μ…μ„ λ°ν™ν•λ”μ§€ ν…μ¤νΈλ¥Όν•΄λ³΄μ   
    
**src.test.hello.core.scan.AutoAppConfigTest.class**
```java
package hello.core.scan;

import hello.core.AutoAppConfig;
import hello.core.member.MemberService;
import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import static org.assertj.core.api.Assertions.assertThat;

public class AutoAppConfigTest {

    @Test
    void basicScan() {
        // given
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class);

        // when
        MemberService memberService = ac.getBean(MemberService.class);

        // then
        assertThat(memberService).isInstanceOf(MemberService.class);
    }
}
```
```java
22:26:51.025 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@18a70f16
22:26:51.051 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
22:26:51.201 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [/Users/ujae/IdeaProjects/inflearn/core/out/production/classes/hello/core/discount/RateDiscountPolicy.class]
22:26:51.210 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [/Users/ujae/IdeaProjects/inflearn/core/out/production/classes/hello/core/member/MemberServiceImpl.class]
22:26:51.212 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [/Users/ujae/IdeaProjects/inflearn/core/out/production/classes/hello/core/member/MemoryMemberRepository.class]
22:26:51.214 [main] DEBUG org.springframework.context.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [/Users/ujae/IdeaProjects/inflearn/core/out/production/classes/hello/core/order/OrderServiceImpl.class]
22:26:51.384 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
22:26:51.387 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
22:26:51.388 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
22:26:51.390 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
22:26:51.408 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'autoAppConfig'
22:26:51.416 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'rateDiscountPolicy'
22:26:51.416 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'memberServiceImpl'
22:26:51.449 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'memoryMemberRepository'
22:26:51.451 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'memberServiceImpl' via constructor to bean named 'memoryMemberRepository'
22:26:51.452 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'orderServiceImpl'
22:26:51.454 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'orderServiceImpl' via constructor to bean named 'memoryMemberRepository'
22:26:51.455 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'orderServiceImpl' via constructor to bean named 'rateDiscountPolicy'

Process finished with exit code 0
```  
μ‹¤ν–‰ κ²°κ³Όλ¥Ό λ³΄λ©΄, `ClassPathBeanDefinitionScanner`λΌλ” λ¬Έκµ¬κ°€ μκ³              
μ΄λ΅μΈν•΄ μ»΄ν¬λ„νΈ μ¤μΊ”μ΄ μΌμ–΄λ‚¬μμ„ μμƒν•  μ μλ‹¤.           
κ·Έλ¦¬κ³  κ·Έ λ°‘μΌλ΅ μ‹¤μ λ΅ λΉμ„ μ‹±κΈ€ν†¤ ν¨ν„΄μΌλ΅ λ“±λ΅ν–λ‹¤λ” κ²ƒ λν• μ• μ μλ‹¤.        
    
λΉμΌλ΅ λ“±λ΅ν• κ°μ²΄λ“¤μ„ μ‹λ³„ν•λ” μ΄λ¦„λ„ κ°™μ΄ λ‚μ¤λ”λ°      
μ¤ν”„λ§ λΉμ κΈ°λ³Έ μ΄λ¦„μ€ ν΄λμ¤λ…μ„ μ‚¬μ©ν•λ λ§¨ μ•κΈ€μλ§ μ†λ¬Έμλ¥Ό μ‚¬μ©ν•λ‹¤.     
      
* λΉ μ΄λ¦„ κΈ°λ³Έ μ „λµ: `MemberServiceImpl` ν΄λμ¤ `memberServiceImpl`   
* λΉ μ΄λ¦„ μ§μ ‘ μ§€μ •: λ§μ•½ μ¤ν”„λ§ λΉμ μ΄λ¦„μ„ μ§μ ‘ μ§€μ •ν•κ³  μ‹¶μΌλ©΄  
   * `@Component("memberService2")` μ΄λ°μ‹μΌλ΅ μ΄λ¦„μ„ λ¶€μ—¬ν•λ©΄ λλ‹¤.   
      
# νƒμƒ‰ μ„μΉμ™€ κΈ°λ³Έ μ¤μΊ” λ€μƒ       
μ°μ„  λ””ν΄νΈ νƒμƒ‰μ„μΉλ¶€ν„° μ„¤λ…ν•λ” νΈμ΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.          
`@Component`μ–΄λ…Έν…μ΄μ…μ— λ³„λ‹¤λ¥Έ μ†μ„±κ°’μ„ μ£Όμ§€ μ•μ„ κ²½μ°             
ν•΄λ‹Ή ν΄λμ¤κ°€ μ†ν• ν¨ν‚¤μ§€λ¥Ό λ£¨νΈλ΅ μ§€μ •ν•μ—¬          
**ν„μ¬ λ° ν•μ„ ν¨ν‚¤μ§€μ `@Component`λ¥Ό μ„ μ–Έν• ν΄λμ¤λ¥Ό μ°Ύλ”λ‹¤.**           

```java
@ComponentScan(
 basePackages = "hello.core",
}
```
λ¬Όλ΅ , μ„μ™€ κ°™μ΄ `basePackages`λ¥Ό μ„ μ–Έν•μ—¬ νΉμ • ν¨ν‚¤μ§€λ¥Ό λ£¨νΈλ΅ μ§€μ •ν•  μ μλ‹¤.     

* `basePackages = {"hello.core", "hello.service"}`   
           
μ„μ™€ κ°™μ΄ μ—¬λ¬ ν¨ν‚¤μ§€λ¥Ό μ¤μΊ”μ λ£¨νΈ μ„μΉλ΅ μ§€μ •ν•  μλ„ μλ‹¤.     
    
```java
@ComponentScan(
 basePackageClasses = "AutoAppConfig.class",
}
```    
`basePackageClasses`μ†μ„±μ€ μ§€μ •ν• ν΄λμ¤μ ν¨ν‚¤μ§€λ¥Ό μ¤μΊ”μ μ‹μ‘ μ„μΉλ΅ μ§€μ •ν•λ‹¤.       
λ¬Όλ΅ , ν„μ¬ ν΄λμ¤κ°€ μ•„λ‹ λ‹¤λ¥Έ ν΄λμ¤λ¥Ό μ§€μ •ν•΄μ„ μ‚¬μ©ν•΄λ„ λλ©°,            
μ§€μ •ν•μ§€ μ•μ•λ‹¤λ©΄ `@ComponentScan` μ΄ λ¶™μ€ μ„¤μ • μ •λ³΄ ν΄λμ¤μ ν¨ν‚¤μ§€κ°€ μ¤μΊ”μ μ‹μ‘ μ„μΉκ°€ λλ‹¤            
    
**κ¶μ¥ν•λ” λ°©λ²•**     
ν•„μ(kwj1270)λ° κΉ€μν•λ‹μ κ°μΈμ μΈ μ¶”μ² λ°©λ²•μ€     
μ„¤μ • μ •λ³΄ ν΄λμ¤μ μ„μΉλ¥Ό ν”„λ΅μ νΈ μµμƒλ‹¨μ— λ‘λ” κ²ƒμ΄λ‹¤.     
(μ¤ν”„λ§ λ¶€νΈλ„ μ΄ λ°©λ²•μ„ κΈ°λ³ΈμΌλ΅ μ κ³µν•λ‹¤.)   
   
μλ¥Ό λ“¤μ–΄μ„ ν”„λ΅μ νΈκ°€ μ•„λμ™€ κ°™μ€ κµ¬μ΅°λ΅ λμ–΄ μμΌλ©΄
   
* com.hello
* com.hello.serivce
* com.hello.repository
  
`com.hello` ν”„λ΅μ νΈ μ‹μ‘ λ£¨νΈ,        
μ—¬κΈ°μ— `AppConfig` κ°™μ€ λ©”μΈ μ„¤μ • μ •λ³΄λ¥Ό λ‘κ³ ,     
`@ComponentScan` μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ΄κ³ , μ¤μΊ” λ£¨νΈ μ§€μ • κ΄€λ ¨ μ†μ„± μ •μλ” μƒλµν•λ‹¤.        
          
μ΄λ ‡κ² ν•λ©΄ `com.hello` λ¥Ό ν¬ν•¨ν• ν•μ„λ” λ¨λ‘ μλ™μΌλ΅ **μ»΄ν¬λ„νΈ μ¤μΊ”μ λ€μƒμ΄ λλ‹¤.**            
κ·Έλ¦¬κ³  ν”„λ΅μ νΈ λ©”μΈ μ„¤μ • μ •λ³΄λ” ν”„λ΅μ νΈμ λ€ν‘ μ •λ³΄μ΄κΈ°μ— ν”„λ΅μ νΈ μ‹μ‘ λ£¨νΈ μ„μΉμ— λ‘λ” κ²ƒμ΄ μΆ‹λ‹¤.         
        
μ°Έκ³ λ΅ `@SpringBootApplication`λ¥Ό ν”„λ΅μ νΈ μ‹μ‘ λ£¨νΈ μ„μΉμ— λ‘λ” κ²ƒμ΄ κ΄€λ΅€μ΄λ‹¤.    
κ·Έλ¦¬κ³  `@SpringBootApplication` μ•μ—λ” `@ComponentScan` μ΄ λ“¤μ–΄μλ‹¤.    
         
**μ»΄ν¬λ„νΈ μ¤μΊ” κΈ°λ³Έ λ€μƒ**   
μ»΄ν¬λ„νΈ μ¤μΊ”μ€ `@Component` λΏλ§ μ•„λ‹λΌ λ‹¤μκ³Ό λ‚΄μ©λ„ μ¶”κ°€λ΅ λ€μƒμ— ν¬ν•¨ν•λ‹¤.

* **@Component :** μ»΄ν¬λ„νΈ μ¤μΊ”μ—μ„ μ‚¬μ©
* **@Controlller :** μ¤ν”„λ§ MVC μ»¨νΈλ΅¤λ¬μ—μ„ μ‚¬μ©
* **@Service :** μ¤ν”„λ§ λΉ„μ¦λ‹μ¤ λ΅μ§μ—μ„ μ‚¬μ©  
* **@Repository :** μ¤ν”„λ§ λ°μ΄ν„° μ ‘κ·Ό κ³„μΈµμ—μ„ μ‚¬μ©
* **@Configuration :** μ¤ν”„λ§ μ„¤μ • μ •λ³΄μ—μ„ μ‚¬μ©
        
μ•„λ μ‹¤μ  μ–΄λ…Έν…μ΄μ…μ μ •μ λ‚΄μ©μ„ μ‚΄ν΄λ³΄λ©΄          
`@Component` μ–΄λ…Έν…μ΄μ…μ„ ν¬ν•¨ν•κ³  μλ” κ²ƒμ„ μ• μ μλ‹¤.            
`@Component` μ–΄λ…Έν…μ΄μ…μ€ λ©”νƒ€ μ–΄λ…Έν…μ΄μ…μΌλ΅ λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ…μ μ •μμ—λ„ μ‚¬μ©ν•  μ μλ‹¤.  
     
```java
@Component
public @interface Controller {
}
@Component
public @interface Service {
}
@Component
public @interface Configuration {
}
```
      
μ‚¬μ‹¤ μ–΄λ…Έν…μ΄μ…μ—λ” μƒμ†κ΄€κ³„λΌλ” κ²ƒμ΄ μ—†λ‹¤.          
κ·Έλμ„ μ΄λ ‡κ² μ–΄λ…Έν…μ΄μ…μ΄ νΉμ • μ–΄λ…Έν…μ΄μ…μ„ λ“¤κ³  μλ” κ²ƒμ„ μΈμ‹ν•  μ μλ” κ²ƒμ€            
μλ°” μ–Έμ–΄κ°€ μ§€μ›ν•λ” κΈ°λ¥μ€ μ•„λ‹κ³ , μ¤ν”„λ§μ΄ μ§€μ›ν•λ” κΈ°λ¥μ΄λ‹¤.              
μ •ν™•νλ” μ¤ν”„λ§μ—μ„ μ κ³µν•λ” `μ–΄λ…Έν…μ΄μ… ν”„λ΅μ„Έμ„/μ–΄λ…Έν…μ΄μ… ν”„λ΅μ„Έμ‹±`μ„ μ΄μ©ν• λ°©λ²•μ΄λ‹¤.        
κ·Έλ ‡κΈ°μ— μ–΄λ…Έν…μ΄μ…μ— λ¶€κ°€ κΈ°λ¥μ„ μ¶”κ°€ν•μ—¬ λ” ν¨μ¨μ μΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ„λ΅ λ„μ™€μ£Όλ” κ²ƒμ΄λ‹¤.     
       
λ‹¤μ μ–΄λ…Έν…μ΄μ…λ“¤μ€ μ»΄ν¬λ„νΈ μ¤μΊ”μ μ©λ„ λΏλ§ μ•„λ‹λΌ μ¤ν”„λ§ λ¶€κ°€ κΈ°λ¥μ„ μν–‰ν•λ‹¤.      
      
* **@Controller :** μ¤ν”„λ§ MVC μ»¨νΈλ΅¤λ¬λ΅ μΈμ‹    
* **@Repository :** μ¤ν”„λ§ λ°μ΄ν„° μ ‘κ·Ό κ³„μΈµμΌλ΅ μΈμ‹ν•κ³ , λ°μ΄ν„° κ³„μΈµμ μμ™Έλ¥Ό μ¤ν”„λ§ μμ™Έλ΅ λ³€ν™ν•΄μ¤€λ‹¤.    
* **@Configuration :** μ•μ„ λ³΄μ•λ“―μ΄ μ¤ν”„λ§ μ„¤μ • μ •λ³΄λ΅ μΈμ‹ν•κ³ ,     
  μ¤ν”„λ§ λΉμ΄ μ‹±κΈ€ν†¤μ„ μ μ§€ν•λ„λ΅ μ¶”κ°€ μ²λ¦¬λ¥Ό ν•λ‹¤.    
* **@Service :** μ‚¬μ‹¤ `@Service` λ” νΉλ³„ν• μ²λ¦¬λ¥Ό ν•μ§€ μ•λ”λ‹¤.       
  λ€μ‹  κ°λ°μλ“¤μ΄ ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§μ΄ μ—¬κΈ°μ— μκ² κµ¬λ‚ λΌκ³  λΉ„μ¦λ‹μ¤ κ³„μΈµμ„ μΈμ‹ν•λ”λ° λ„μ›€μ΄ λλ‹¤.    
   
μ°Έκ³ λ΅, `useDefaultFilters` μµμ…μ΄ κΈ°λ³ΈμΌλ΅ μΌμ Έμλ”λ°, μ΄ μµμ…μ„ λ„λ©΄ κΈ°λ³Έ μ¤μΊ” λ€μƒλ“¤μ΄ μ μ™Έλλ‹¤.    
    
# ν•„ν„°  
`@ComponentScan`μ μ†μ„±μ¤‘μ— νΉμ • λΉμ„ λ“±λ΅ν•κ±°λ‚ λ“±λ΅ν•μ§€ μ•λ„λ΅ ν•λ” κΈ°λ¥μ΄ μλ‹¤.     
   
* **includeFilters :** μ»΄ν¬λ„νΈ μ¤μΊ” λ€μƒμ„ μ¶”κ°€λ΅ μ§€μ •ν•λ‹¤.    
* **excludeFilters :** μ»΄ν¬λ„νΈ μ¤μΊ”μ—μ„ μ μ™Έν•  λ€μƒμ„ μ§€μ •ν•λ‹¤    
  
μ΄ λ¶€λ¶„μ— λ€ν•΄μ„ μ°μ„ , μ½”λ“λ΅ λ™μ‘μ„ μ΄ν•΄ν•κ³  μ •λ¦¬ν•΄λ³΄μ    
   
**src.test.hello.core.scan.filter.MyIncludeComponent.interface**
```java
package hello.core.scan.filter;

import org.springframework.stereotype.Component;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Component
public @interface MyIncludeComponent {

}
```
   
**src.test.hello.core.scan.filter.MyExcludeComponent.interface**
```java
package hello.core.scan.filter;

import org.springframework.stereotype.Component;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Component
public @interface MyExcludeComponent {

}
```

**src.test.hello.core.scan.filter.BeanA.class**
```java
package hello.core.scan.filter;

@MyIncludeComponent
public class BeanA {
}
```

**src.test.hello.core.scan.filter.BeanB.class**
```java
package hello.core.scan.filter;

@MyIncludeComponent
public class BeanB {
}
```
   
**src.test.hello.core.scan.filter.ComponentFilterAppConfigTest.class**
```java
package hello.core.scan.filter;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.NoSuchBeanDefinitionException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;

import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.assertThatThrownBy;
import static org.springframework.context.annotation.ComponentScan.*;

public class ComponentFilterAppConfigTest {

    @Test
    void filterScan() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(ComponentFilterAppConfig.class);
        BeanA beanA = ac.getBean("beanA", BeanA.class);
        assertThat(beanA).isNotNull();

        assertThatThrownBy(()-> ac.getBean("beanB", BeanB.class))
                .isInstanceOf(NoSuchBeanDefinitionException.class);
    }

    @ComponentScan(
            includeFilters = @Filter(type = FilterType.ANNOTATION, classes = MyIncludeComponent.class),
            excludeFilters = @Filter(type = FilterType.ANNOTATION, classes = MyExcludeComponent.class)
    )
    @Configuration
    static class ComponentFilterAppConfig {

    }
}
```   
μ½”λ“μ—μ„ μ• μ μλ“―μ΄, νΉμ • μ–΄λ…Έν…μ΄μ…μ— λ”°λΌ νΉμ • λΉμ„ λ“±λ΅ν•κ±°λ‚ μμ™Έμ‹ν‚¤κ³  μλ‹¤.      
μ΄ κ³Όμ •μ—μ„ ν• κ°€μ§€ λμ—¬κ²¨ λ³Ό μ μ΄ μλ”λ°, λ°”λ΅ `@ComponentScan.FilterType`μ΄λ‹¤.    
μ΄ λ¶€λ¶„μ— λ€ν•΄μ„λ” λ¨λ¥΄κ³  λ„μ–΄κ° μ μλ” λ¶€λ¶„μ΄ λ§κΈ°μ— μ •λ¦¬λ¥Ό ν•κ³  κ°€λ©΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤ βΊ     
(μ°μ„  μ„μ½”λ“μ—μ„λ” μΌλ°μ μΈ λ°©λ²•μΌλ΅ μ‘μ„±μ‹ μ½”λ“κ°€ κΈΈμ–΄μ„ `import static`μΌλ΅ κ°„λµν λ‚νƒ€λ‚΄μ—λ‹¤.)   
        
**FilterType μµμ…**  
FilterTypeμ€ 5κ°€μ§€ μµμ…μ΄ μλ‹¤.
    
* **ANNOTATION:** κΈ°λ³Έκ°’, μ• λ…Έν…μ΄μ…μ„ μΈμ‹ν•΄μ„ λ™μ‘ν•λ‹¤.
  * ex) org.example.SomeAnnotation
* **ASSIGNABLE_TYPE:** μ§€μ •ν• νƒ€μ…κ³Ό μμ‹ νƒ€μ…μ„ μΈμ‹ν•΄μ„ λ™μ‘ν•λ‹¤.
  * ex) org.example.SomeClass
* **ASPECTJ:** AspectJ ν¨ν„΄ μ‚¬μ©
  * ex) org.example..*Service+
* **REGEX:** μ •κ· ν‘ν„μ‹
  * ex) org\.example\.Default.*
* **CUSTOM:** TypeFilter μ΄λΌλ” μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ„ μ²λ¦¬
  * ex) org.example.MyTypeFilter

```java
@ComponentScan(
    includeFilters = {
        @Filter(type = FilterType.ANNOTATION, classes = MyIncludeComponent.class),
    },
    excludeFilters = {
        @Filter(type = FilterType.ANNOTATION, classes = MyExcludeComponent.class),
        @Filter(type = FilterType.ASSIGNABLE_TYPE, classes = BeanA.class)
    }
)
```
λ§μ•½, `BeanA`μ λΉλ„ μ μ™Έν•κ³  μ‹¶λ‹¤λ©΄ μ„μ™€ κ°™μ€ μ½”λ“λ΅ μ‘μ„±ν•λ©΄ λλ‹¤.   
μ •ν™•ν• λ΅μ§μ—λ€ν•΄μ„λ” μ΅°κΈ ν—·κ°λ¦¬μ§€λ§, μ•„λ§ `include`μ ν•μ„μΈ `BeanA`λ¥Ό μ μ™Έν•λ‹¤λ” κ²ƒ κ°™λ‹¤.   
   
μ°Έκ³ λ΅ `@Component` λ©΄ μ¶©λ¶„ν•κΈ° λ•λ¬Έμ—, `includeFilters` λ¥Ό μ‚¬μ©ν•  μΌμ€ κ±°μ μ—†λ‹¤.       
`excludeFilters` λν•, μ—¬λ¬κ°€μ§€ μ΄μ λ΅ κ°„νΉ μ‚¬μ©ν•  λ•κ°€ μμ§€λ§ λ§μ§€λ” μ•λ‹¤.   
       
νΉν, μµκ·Ό μ¤ν”„λ§ λ¶€νΈλ” μ»΄ν¬λ„νΈ μ¤μΊ”μ„ κΈ°λ³ΈμΌλ΅ μ κ³µν•λ”λ°,        
μµμ…μ„ λ³€κ²½ν•λ©΄μ„ μ‚¬μ©ν•κΈ°λ³΄λ‹¤λ” μ¤ν”„λ§μ κΈ°λ³Έ μ„¤μ •μ— μµλ€ν• λ§μ¶”μ–΄ μ‚¬μ©ν•λ” κ²ƒμ„ κ¶μ¥ν•λ‹¤.   
   





