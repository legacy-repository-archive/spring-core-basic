# ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   
ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ëŠ” `@Bean`ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ê±°ë‚˜        
XML ì„¤ì • íŒŒì¼ì„ ì´ìš©í•˜ì—¬ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì§ì ‘ ë¹ˆì„ ë“±ë¡í–ˆë‹¤.          
í•˜ì§€ë§Œ, ë“±ë¡í•˜ëŠ” ë¹ˆì˜ ê°¯ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ì´ ë˜í•œ ë²ˆê±°ë¡­ê³  ê·€ì°®ì€ ì‘ì—…ì´ ëœë‹¤.  
ë¬´ì—‡ë³´ë‹¤ í•´ë‹¹ íŒŒì¼ì„ ì¼ì¼íˆ ê´€ë¦¬í•´ì£¼ì–´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆë‹¤.    

ì´ë¥¼ í•´ì†Œí•´ì£¼ê¸° ìœ„í•´, ìŠ¤í”„ë§ì—ì„œëŠ” `@ComponentScan`ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.     
ë˜ ì˜ì¡´ê´€ê³„ë„ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì£¼ëŠ” `@Autowired`ë¼ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•´ì¤€ë‹¤.      

ìš°ì„ , ìš°ë¦¬ëŠ” ê°œë°œìì´ë¯€ë¡œ ì½”ë“œë¡œ ì§ì ‘ ê¸°ëŠ¥ì„ ì•Œì•„ë³´ì  
   
**AutoAppConfig**   
```java
package hello.core;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;

// ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì€ ë³„ë‹¤ë¥¸ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ í˜„ í´ë˜ìŠ¤ë¥¼ ë£¨íŠ¸ë””ë ‰í† ë¦¬ë¡œ ì¡ëŠ”ë‹¤.
// ì¦‰, í˜„ í´ë˜ìŠ¤ë¶€í„° í•˜ìœ„ ë””ë ‰í„°ë¦¬ì˜ @Component ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.(ì´ í´ë˜ìŠ¤ë„)
// ì œì™¸í•  ìš”ì†Œë“¤ì„ ì„ íƒí•˜ëŠ”ë°, AppConfig ì™€ ê°™ì€ @Configuration ì„ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ëŠ” ì œì™¸
@Configuration
@ComponentScan(
        excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = Configuration.class)
)
public class AutoAppConfig {
}
```   
ì´ì „, `AppConfig`ì™€ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” `AutoAppConfig`í´ë˜ìŠ¤ë¥¼ ìƒì„±í–ˆë‹¤.         
íŠ¹ì´í•œì ì€, `@ComponentScan`ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì—ˆê³  `@Bean`ì„ ë“±ë¡í•œ ë©”ì†Œë“œê°€ ì—†ë‹¤.         
**ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ë™ì‘ì„ í•˜ëŠ” ê²ƒì¸ê°€? ğŸ¤”**     
           
ìš°ë¦¬ëŠ” ì–´ë…¸í…Œì´ì…˜ì˜ ì´ë¦„ ê·¸ëŒ€ë¡œì—ì„œ ê·¸ í•´ë‹µì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.        
`@ComponentScan` ì–´ë…¸í…Œì´ì…˜ì€ `@Component`ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì°¾ëŠ”ë‹¤.        
ê·¸ë¦¬ê³  ì°¾ì€ í´ë˜ìŠ¤ë“¤ì„ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡í•´ì£¼ëŠ” ì—­í• ì„ í•˜ê³  ìˆë‹¤.       
ê·¸ë ‡ê¸°ì— ë”°ë¡œ `@Bean`ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì–´ì„œ ë¹ˆì„ ë“±ë¡í•  í•„ìš”ê°€ ì—†ê¸°ì— ì´ë¥¼ ì œê±°í•œ ê²ƒì´ë‹¤.       
      
í•œ ê°€ì§€ íŠ¹ì´ì ìœ¼ë¡œëŠ” `@ComponentScan`ì— ì†ì„±ê°’ì— í•„í„° ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆë‹¤.       
`excludeFilters`ì€ ì œì™¸í•  í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ì†ì„±ì´ë‹¤.     
ì´ì „, ìš°ë¦¬ê°€ ì‚¬ìš©í–ˆë˜ `AppConfig`ì—ì„œë„ ìš°ë¦¬ê°€ ë“±ë¡í•œ ë¹ˆë“¤ì´ ìˆê¸°ì—      
`@ComponentScan`ìœ¼ë¡œ ë“±ë¡í•  ë¹ˆ ë“¤ê³¼ ì¶©ëŒì´ ì¼ì–´ë‚˜ê¸°ì— `@Configuration`ì´ ë¶™ì€ í´ë˜ìŠ¤ëŠ” ì œì™¸í•œ ê²ƒì´ë‹¤.     
 
ê·¸ëŸ¬ë©´ ì´ì œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•  í´ë˜ìŠ¤ë“¤ì— `@Component`ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ëŸ¬ ê°€ë³´ì 
   
**RateDiscountPolicy.class**
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.springframework.stereotype.Component;

@Component
public class RateDiscountPolicy implements DiscountPolicy{

    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade() == Grade.VIP){
            return price * discountPercent / 100;
        }
        return 0;
    }
}
```

**MemoryMemberRepository.class**
```java
package hello.core.member;

import org.springframework.stereotype.Component;

import java.util.HashMap;
import java.util.Map;

@Component
public class MemoryMemberRepository implements MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();

    @Override
    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }

}
```

**MemberServiceImpl.class**
```java
package hello.core.member;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository;

    @Autowired
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }

    // í…ŒìŠ¤íŠ¸ìš© ë©”ì„œë“œ
    public MemberRepository getMemberRepository() {
        return memberRepository;
    }

}
```
   
**OrderServiceImpl.class**
```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }

    // í…ŒìŠ¤íŠ¸ ìš©ë„
    public MemberRepository getMemberRepository() {
        return memberRepository;
    }

}
```





